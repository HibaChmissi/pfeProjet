<app-header></app-header>
<div class="container">
  <div class="row" style="padding-left: 20%;">
    <!-- Profile Card -->
    <div class="col-xl-5 col-lg-5 offset-xl-1 offset-lg-1 col-md-12 col-sm-12 col-12 mt-5">
      <div class="card h-100">
        <div class="card-body">
          <div class="account-settings">
            <div class="user-profile">
              <div class="user-avatar">
                <img src="assets/images/users/admin.jpg">
              </div>
              <h5 class="user-name">{{ userDetails.nom }}{{ userDetails.prenom }}</h5>
              <h6 class="user-email">{{ userDetails.email }}</h6>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Personal Details Card -->
    <div class="col-xl-5 col-lg-5 offset-xl-1 offset-lg-1 col-md-12 col-sm-12 col-12 mt-5">
      <div class="card h-100">
        <div class="card-body">
          <div class="row gutters">
            <div class="col-xl-10">
              <h6 class="mb-3 text-primary d-inline">Détails personnels</h6>
            </div>
            <button type="button" class="btn btn-link float-end text-muted d-inline-flex text-decoration-underline p-0" (click)="enableEditing()">
              <i class="iconoir-edit-pencil fs-18 me-1"></i>{{ isEditing ? 'Annuler' : 'Modifier' }}
            </button>

            <div class="col-xl-12">
              <div class="form-group">
                <label for="fullName">Prénom</label>
                <input type="text" class="form-control" id="fullName" [(ngModel)]="userDetails.prenom" [readonly]="!isEditing">
              </div>
            </div>
            <div class="col-xl-12">
              <div class="form-group">
                <label for="lastName">Nom</label>
                <input type="text" class="form-control" id="lastName" [(ngModel)]="userDetails.nom" [readonly]="!isEditing">
              </div>
            </div>
            <div class="col-xl-12">
              <div class="form-group">
                <label for="eMail">Email</label>
                <input type="email" class="form-control" id="eMail" [(ngModel)]="userDetails.email" [readonly]="!isEditing">
              </div>
            </div>
            <div class="col-xl-12">
              <div class="form-group">
                <label for="role">Role</label>
                <input type="text" class="form-control" id="role" [(ngModel)]="userDetails.role" readonly>
              </div>
            </div>

            <!-- Password section -->
            <div *ngIf="isEditing">
              <div class="form-group">
                <label for="newPassword">Nouveau mot de passe</label>
                <input type="password" class="form-control" id="newPassword" [(ngModel)]="newPassword">
              </div>
              <div class="form-group">
                <label for="confirmPassword">Confirmer le mot de passe</label>
                <input type="password" class="form-control" id="confirmPassword" [(ngModel)]="confirmPassword">
              </div>
              <div *ngIf="passwordError" class="text-danger">{{ passwordError }}</div>

              <div class="form-group mt-3">
                <button class="btn btn-primary" (click)="saveChanges()">Enregistrer</button>
                <div *ngIf="successMessage" class="alert alert-success mt-3">
                  {{ successMessage }}
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>


